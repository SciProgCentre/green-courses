<!DOCTYPE html>
<html class="writer-html5" lang="ru" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Assignment 1 (8 p.) &mdash; документация SPC software courses 2023.09</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../https://fonts.googleapis.com/css?family=Vibur" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/jupyterlite_sphinx.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=209f7d96"></script>
        <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../_static/jupyterlite_sphinx.js?v=d6bdf5f8"></script>
        <script src="../../../../_static/translations.js?v=29b1f277"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Алфавитный указатель" href="../../../../genindex.html" />
    <link rel="search" title="Поиск" href="../../../../search.html" />
    <link rel="next" title="Материалы курса" href="../../../../cards/toctree.html" />
    <link rel="prev" title="Домашняя работа № 1 (14 p.)" href="01.html" />
    <link href="../../../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            SPC software courses
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Поиск в документации" aria-label="Поиск в документации" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Меню навигации">
              <p class="caption" role="heading"><span class="caption-text">Список материалов:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../laboratory_python.html">Использование Python в лабораторном практикуме</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../beginner_python.html">Начала программирования на Python</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../advanced_python.html">Продвинутое программирование на Python</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="toctree.html">Домашняя работа 2024</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="01.html">Домашняя работа № 1 (14 p.)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Assignment 1 (8 p.)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assignment-2-12-p">Assignment 2 (12 p.)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assignment-3-8-p">Assignment 3 (8 p.)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assignment-4-14-p">Assignment 4 (14 p.)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assignment-5-16-19-p">Assignment 5 (16 (19) p.)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assignment-7-10-p">Assignment 7 (10 p.)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assignment-8-8-p">Assignment 8 (8 p.)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assignment-9-14-p">Assignment 9 (14 p.)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assignment-10-14-p">Assignment 10 (14 p.)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assignment-11-8-p">Assignment 11 (8 p.)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assignment-12-12-p">Assignment 12 (12 p.)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assignment-13-8-p">Assignment 13 (8 p.)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assignment-14-12-p">Assignment 14 (12 p.)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assignment-15-10-p">Assignment 15 (10 p.)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usb-rodos-5">USB-термометр RODOS-5</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../cards/toctree.html">Материалы курса</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../laboratory_work/toctree.html">Лабораторные работы по Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference.html">Источники — полезное для саморазвития дополнительное чтение</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../authors.html">Авторы и контакты</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Меню навигации для мобильных устройств" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">SPC software courses</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Навигация по страницам">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../advanced_python.html">Продвинутое программирование на Python</a></li>
          <li class="breadcrumb-item"><a href="toctree.html">Домашняя работа 2024</a></li>
      <li class="breadcrumb-item active">Assignment 1 (8 p.)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/pages/advanced_python/2024/hw/stem_assignment.md.txt" rel="nofollow"> Просмотреть исходный код страницы</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="assignment-1-8-p">
<h1>Assignment 1 (8 p.)<a class="headerlink" href="#assignment-1-8-p" title="Link to this heading"></a></h1>
<p>In this assignment you have to prepare your project workspace.
In during semester, we will develop two projects: STEM framework and Super TEmperature Monitor.</p>
<ol class="arabic simple">
<li><p>(1 p.) Create git repository for your project on Github (or <a class="reference external" href="https://code.mipt.ru/">MIPT Gitlab</a>, <a class="reference external" href="https://git.sciprog.center/">SCP Gitea</a>), and send me link on repository. Merge top commit of main branch from <a class="reference external" href="https://github.com/Zelenyy/advanced-python-homework">this repository</a> in your repository (You can clone this repository? but mos interesting task is the creation from local repository).</p></li>
<li><p>(1 p.) Create two directory (every directory used for single project: <code class="docutils literal notranslate"><span class="pre">stem_framework</span></code> and <code class="docutils literal notranslate"><span class="pre">temperature_monitor</span></code>, in both directory create python package <code class="docutils literal notranslate"><span class="pre">stem</span></code> and file <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>.</p></li>
<li><p>(1 p.) Create license for both projects.</p></li>
</ol>
<p><strong>Next tasks performed in project STEM framework (directory <code class="docutils literal notranslate"><span class="pre">stem_framework</span></code>).</strong></p>
<ol class="arabic simple" start="4">
<li><p>(1 p.) Create file for deployment virtual enviroment (using <code class="docutils literal notranslate"><span class="pre">venv</span></code>, <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> or <code class="docutils literal notranslate"><span class="pre">condaenv</span></code>). Add command for deployment in project <code class="docutils literal notranslate"><span class="pre">README.md</span></code>. Virtual environment must be contained package necessary for develop project (not project dependency), namely Sphinx, Pylint and MyPy.</p></li>
<li><p>(1 p.) Fill <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file for setuping <code class="docutils literal notranslate"><span class="pre">stem</span></code> package in developer mode.</p></li>
<li><p>(1 p.) Read paper <a class="reference external" href="http://dx.doi.org/10.1051/epjconf/201817705003">DataForge: Modular platform for data storage and analysis</a>.</p></li>
<li><p>(1 p.) Add next modules in <code class="docutils literal notranslate"><span class="pre">stem</span></code> package: <code class="docutils literal notranslate"><span class="pre">core.py</span></code>, <code class="docutils literal notranslate"><span class="pre">meta.py</span></code>, <code class="docutils literal notranslate"><span class="pre">task.py</span></code>, <code class="docutils literal notranslate"><span class="pre">workspace.py</span></code>. Add shortly module level docstring in modules <code class="docutils literal notranslate"><span class="pre">meta.py</span></code>, <code class="docutils literal notranslate"><span class="pre">task.py</span></code>, <code class="docutils literal notranslate"><span class="pre">workspace.py</span></code>. In <code class="docutils literal notranslate"><span class="pre">meta.py</span></code> docstring describe conception of metadata and metadata processor. In <code class="docutils literal notranslate"><span class="pre">task.py</span></code> describe task terms, in <code class="docutils literal notranslate"><span class="pre">workspace.py</span></code> conception modularity software.</p></li>
<li><p>(1 p.) Create Sphinx documentation of <code class="docutils literal notranslate"><span class="pre">stem</span></code> package (include docstrings of <code class="docutils literal notranslate"><span class="pre">stem</span></code> package). Add to repository configs for build documentation. Make integration between sphinx and <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>, allow build documentation using <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">build_sphinx</span></code>.</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="assignment-2-12-p">
<h1>Assignment 2 (12 p.)<a class="headerlink" href="#assignment-2-12-p" title="Link to this heading"></a></h1>
<p>In this assignment you have to develop a metadata processor for the STEM Framework.</p>
<p>In the STEM, the task run includes three stage:</p>
<ol class="arabic simple">
<li><p>Resolving the task dependencies and building the task tree.</p></li>
<li><p>Metadata verification: each task has <code class="docutils literal notranslate"><span class="pre">Specification</span></code> which describes required meta and the metadata processor checks input meta the correspondence to the specification.</p></li>
<li><p>The invocation of each task.</p></li>
</ol>
<p>Meta is tree-like structure which contains key-value pairs on top level. The key is a string, the value is a primitive type, list or another Meta type. In the STEM we will use a dictionary and a dataclass as Meta objects.</p>
<p>Specification is description of mandatory part of the metadata which must be present in the Meta for the given task. The metadata processor checks whether the given meta corresponds specification before the execution of the task. In the STEM we use dataclass class-object if the dataclass instance is used as the Meta object and sequence of name-type pairs otherwise.</p>
<ol class="arabic simple">
<li><p>(1 p.) In <code class="docutils literal notranslate"><span class="pre">core.py</span></code> module create a protocol <code class="docutils literal notranslate"><span class="pre">Dataclass</span></code> as a type annotation for a dataclass object.</p></li>
<li><p>(1 p.) In <code class="docutils literal notranslate"><span class="pre">meta.py</span></code> module create a type annotation for the next types:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Meta</span></code> — union of the <code class="docutils literal notranslate"><span class="pre">dict</span></code> and the <code class="docutils literal notranslate"><span class="pre">Dataclass</span></code> type.</p></li>
<li><p>Specification field type <code class="docutils literal notranslate"><span class="pre">SpecificationField</span></code> — pairs of necessary meta key and necessary meta value type (this can be single type, tuple of types, or another specification if meta value is another <code class="docutils literal notranslate"><span class="pre">Meta</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Specification</span></code> for specification — union of the <code class="docutils literal notranslate"><span class="pre">Dataclass</span></code> or tuple of the <code class="docutils literal notranslate"><span class="pre">SpecifiationField</span></code> type.
Note: we can add additional type annotations if necessary.</p></li>
</ol>
</li>
<li><p>(1 p.) In <code class="docutils literal notranslate"><span class="pre">meta.py</span></code> module implement function <code class="docutils literal notranslate"><span class="pre">get_meta_attr(meta</span> <span class="pre">:</span> <span class="pre">Meta,</span> <span class="pre">key</span> <span class="pre">:</span> <span class="pre">str,</span> <span class="pre">default</span> <span class="pre">:</span> <span class="pre">Optional[Any]</span> <span class="pre">=</span> <span class="pre">None)</span> <span class="pre">-&gt;</span> <span class="pre">Optional[Any]:</span></code> which return meta value by <code class="docutils literal notranslate"><span class="pre">key</span></code> from top level of <code class="docutils literal notranslate"><span class="pre">meta</span></code> or <code class="docutils literal notranslate"><span class="pre">default</span></code> if <code class="docutils literal notranslate"><span class="pre">key</span></code> don’t exist in <code class="docutils literal notranslate"><span class="pre">meta</span></code>.</p></li>
<li><p>(1 p.) In <code class="docutils literal notranslate"><span class="pre">meta.py</span></code> module implement function <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">update_meta(meta:</span> <span class="pre">Meta,</span> <span class="pre">**kwargs):</span></code> which update <code class="docutils literal notranslate"><span class="pre">meta</span></code> from <code class="docutils literal notranslate"><span class="pre">kwargs</span></code>.</p></li>
<li><p>(6 p.) In <code class="docutils literal notranslate"><span class="pre">meta.py</span></code> module implement class <code class="docutils literal notranslate"><span class="pre">MetaVerification</span></code> — this class contains result of meta verification. It contains list of instance of dataclass <code class="docutils literal notranslate"><span class="pre">MetaFieldError</span></code> or another <code class="docutils literal notranslate"><span class="pre">MetaVerification</span></code> in the field <code class="docutils literal notranslate"><span class="pre">errors</span></code>:</p>
<ol class="arabic simple">
<li><p>Implement <em>property</em> <code class="docutils literal notranslate"><span class="pre">checked_success</span></code> that returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if there is no errors of verification.</p></li>
<li><p>Implement <em>staticmethod</em> <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">verify(meta:</span> <span class="pre">Meta,</span> <span class="pre">specification:</span> <span class="pre">Optional[Specification]</span> <span class="pre">=</span> <span class="pre">None)</span> <span class="pre">-&gt;</span> <span class="pre">&quot;MetaVerification&quot;:</span></code> which verify <code class="docutils literal notranslate"><span class="pre">meta</span></code> by <code class="docutils literal notranslate"><span class="pre">specification</span></code>. Raise <code class="docutils literal notranslate"><span class="pre">SpecificationError</span></code> if verification impossible.</p></li>
</ol>
</li>
<li><p>(2 p.) In <code class="docutils literal notranslate"><span class="pre">core.py</span></code> module implement class <code class="docutils literal notranslate"><span class="pre">Named</span></code> with <em>property</em> <code class="docutils literal notranslate"><span class="pre">name</span></code>. This property returns value of private variable <code class="docutils literal notranslate"><span class="pre">_name</span></code> if it is not None and returns name of current class (<code class="docutils literal notranslate"><span class="pre">Named</span></code> or his children) in snake_case (for translation classname from PascalCase to snake_case implement <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">pascal_case_to_snake_case(name:</span> <span class="pre">str)</span> <span class="pre">-&gt;</span> <span class="pre">str:</span></code> function).</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="assignment-3-8-p">
<h1>Assignment 3 (8 p.)<a class="headerlink" href="#assignment-3-8-p" title="Link to this heading"></a></h1>
<p>In this assignment you have to implement API for STEM task creation.</p>
<ol class="arabic simple">
<li><p>(2 p.) In <code class="docutils literal notranslate"><span class="pre">task.py</span></code> module implement decorator <code class="docutils literal notranslate"><span class="pre">data(func:</span> <span class="pre">Callable[[Meta],</span> <span class="pre">T],</span> <span class="pre">specification:</span> <span class="pre">Optional[Specification]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">**settings)</span> <span class="pre">-&gt;</span> <span class="pre">FunctionDataTask[T]</span></code> which wrap user function as <code class="docutils literal notranslate"><span class="pre">FunctionDataTask</span></code> object. Name of wrapped function and wrapped function have to forward as <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">func</span></code> arguments  of the <code class="docutils literal notranslate"><span class="pre">FunctionDataTask</span></code> constructor. Argument <code class="docutils literal notranslate"><span class="pre">specification</span></code> and keyword arguments <code class="docutils literal notranslate"><span class="pre">settings</span></code> have to forward as <code class="docutils literal notranslate"><span class="pre">specification</span></code> and <code class="docutils literal notranslate"><span class="pre">settings</span></code> arguments of the <code class="docutils literal notranslate"><span class="pre">FunctionDataTask</span></code> constructor. Decorator can be applied as <code class="docutils literal notranslate"><span class="pre">&#64;data</span></code> and as <code class="docutils literal notranslate"><span class="pre">&#64;data(...)</span></code>.</p></li>
<li><p>(3 p.) In <code class="docutils literal notranslate"><span class="pre">task.py</span></code> module implement decorator <code class="docutils literal notranslate"><span class="pre">task(func:</span> <span class="pre">Callable[[Meta,</span> <span class="pre">...],</span> <span class="pre">T],</span> <span class="pre">specification:</span> <span class="pre">Optional[Specification]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">**settings)</span> <span class="pre">-&gt;</span> <span class="pre">FunctionTask[T]</span></code> which wrap user function as <code class="docutils literal notranslate"><span class="pre">FunctionTask</span></code> object. Name of wrapped function and wrapped function have to forward as <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">func</span></code> arguments  of the <code class="docutils literal notranslate"><span class="pre">FunctionTask</span></code> constructor. Names of arguments of wrapped function (exclude argument <code class="docutils literal notranslate"><span class="pre">meta</span></code>) have to forward as <code class="docutils literal notranslate"><span class="pre">dependencies</span></code> argument (as <code class="docutils literal notranslate"><span class="pre">tuple</span></code> of <code class="docutils literal notranslate"><span class="pre">str</span></code>) of the <code class="docutils literal notranslate"><span class="pre">FunctionTask</span></code> constructor. Argument <code class="docutils literal notranslate"><span class="pre">specification</span></code> and keyword arguments <code class="docutils literal notranslate"><span class="pre">settings</span></code> have to forward as <code class="docutils literal notranslate"><span class="pre">specification</span></code> and <code class="docutils literal notranslate"><span class="pre">settings</span></code> arguments of the <code class="docutils literal notranslate"><span class="pre">FunctionTask</span></code> constructor. Decorator can be applied as <code class="docutils literal notranslate"><span class="pre">&#64;task</span></code> and as <code class="docutils literal notranslate"><span class="pre">&#64;task(...)</span></code>.</p></li>
<li><p>(1 p.) In <code class="docutils literal notranslate"><span class="pre">task.py</span></code> module implement class <code class="docutils literal notranslate"><span class="pre">MapTask</span></code> which apply <code class="docutils literal notranslate"><span class="pre">func</span></code> for each element of the iterated dependence. Property <code class="docutils literal notranslate"><span class="pre">name</span></code> have to return the name of the dependence with the prefix <code class="docutils literal notranslate"><span class="pre">&quot;map_&quot;</span></code>.</p></li>
<li><p>(1 p.) In <code class="docutils literal notranslate"><span class="pre">task.py</span></code> module implement class <code class="docutils literal notranslate"><span class="pre">FilterTask</span></code> which filter iterated dependence using <code class="docutils literal notranslate"><span class="pre">key</span></code> function. Property <code class="docutils literal notranslate"><span class="pre">name</span></code> have to return the name of the dependence with the prefix <code class="docutils literal notranslate"><span class="pre">&quot;filter_&quot;</span></code>.</p></li>
<li><p>(1 p.) In <code class="docutils literal notranslate"><span class="pre">task.py</span></code> module implement class <code class="docutils literal notranslate"><span class="pre">ReduceTask</span></code> which reduce iterated dependence using <code class="docutils literal notranslate"><span class="pre">func</span></code> function. Property <code class="docutils literal notranslate"><span class="pre">name</span></code> have to return the name of the dependence with the prefix <code class="docutils literal notranslate"><span class="pre">&quot;reduce_&quot;</span></code>.</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="assignment-4-14-p">
<h1>Assignment 4 (14 p.)<a class="headerlink" href="#assignment-4-14-p" title="Link to this heading"></a></h1>
<p>In this assignment you have to implement building the task tree and automatically dependence resolving.</p>
<p>In the STEM, tasks union in special workspaces (which implemented as children of interface <code class="docutils literal notranslate"><span class="pre">IWorkspace</span></code> and can have sub-workspaces). Also, tasks can be defined on module level and in this case, its implicitly union to special module-workspaces.</p>
<ol class="arabic simple">
<li><p>(8 p.) Implement <strong>metaclass</strong> <code class="docutils literal notranslate"><span class="pre">Workspace(ABCMeta,</span> <span class="pre">ILocalWorkspace):</span></code> in module <code class="docutils literal notranslate"><span class="pre">workspace.py</span></code>. This metaclass provides next features for user classes:</p>
<ol class="arabic simple">
<li><p>The class-object itself must be returned on constructor call of user classes.</p></li>
<li><p>Class-objects of user classes implement the interface <code class="docutils literal notranslate"><span class="pre">ILocalWorkspace</span></code> (see inheritance of <code class="docutils literal notranslate"><span class="pre">Workspace</span></code> class).</p></li>
<li><p>All attributes (not methods) of the user workspace class, which inherit the class <code class="docutils literal notranslate"><span class="pre">Task</span></code> must be replaced on <code class="docutils literal notranslate"><span class="pre">ProxyTask</span></code> objects, using as attribute/method names as proxy names (The constructor of class <code class="docutils literal notranslate"><span class="pre">ProxyTask</span></code> receive two arguments: some task object and it proxy name).</p></li>
<li><p>All <code class="docutils literal notranslate"><span class="pre">ProxyTask</span></code> attributes and methods (which inherit the class <code class="docutils literal notranslate"><span class="pre">Task</span></code> objects) of the user workspace class must be accessible from property <code class="docutils literal notranslate"><span class="pre">tasks</span></code> (Property <code class="docutils literal notranslate"><span class="pre">tasks</span></code> return dictionary, which have names of tasks in keys and itself tasks in values).</p></li>
<li><p>All tasks (<code class="docutils literal notranslate"><span class="pre">ProxyTask</span></code> attributes and task-methods) must have the attribute <code class="docutils literal notranslate"><span class="pre">_stem_workspace</span></code> which contain this workspace.</p></li>
<li><p>Attribute <code class="docutils literal notranslate"><span class="pre">workspaces</span></code> of the user workspace class must be converted to set if present else property <code class="docutils literal notranslate"><span class="pre">workspaces</span></code> must be return empty set (Property <code class="docutils literal notranslate"><span class="pre">workspaces</span></code> return set contains sub-workspaces of this workspace).
Note: Metaclass is black magic, we can ignore ordinary rules of object creation.</p></li>
</ol>
</li>
<li><p>(2 p.) In module <code class="docutils literal notranslate"><span class="pre">workspace.py</span></code>, in class <code class="docutils literal notranslate"><span class="pre">IWorkspace</span></code> implement method  <code class="docutils literal notranslate"><span class="pre">find_task(self,</span> <span class="pre">task_path:</span> <span class="pre">Union[str,</span> <span class="pre">TaskPath])</span> <span class="pre">-&gt;</span> <span class="pre">Optional[Task]</span></code> which return task from this workspace or from his sub-workspaces. <code class="docutils literal notranslate"><span class="pre">task_path</span></code> is special <code class="docutils literal notranslate"><span class="pre">TaskPath</span></code> object or string in next format: names of sub-workspaces (can be no one) and the name of task joined by <code class="docutils literal notranslate"><span class="pre">&quot;.&quot;</span></code>. If <code class="docutils literal notranslate"><span class="pre">task_path</span></code> contains only task name and task with this name absent in workspace should proceed search in sub-workspaces. Return <code class="docutils literal notranslate"><span class="pre">None</span></code> if task can’t be found.</p></li>
<li><p>(3 p.) In module <code class="docutils literal notranslate"><span class="pre">workspace.py</span></code>, in class <code class="docutils literal notranslate"><span class="pre">IWorkspace</span></code> implement <strong>staticmethod</strong>  <code class="docutils literal notranslate"><span class="pre">module_workspace(module:</span> <span class="pre">ModuleType)</span> <span class="pre">-&gt;</span> <span class="pre">&quot;IWorkspace&quot;</span></code> which return module-workspaces. Module-workspaces is the instance of the class <code class="docutils literal notranslate"><span class="pre">LocalWorkspace</span></code>, which contain tasks (instance of class <code class="docutils literal notranslate"><span class="pre">Task</span></code> or its subclasses) and workspaces (instance of class <code class="docutils literal notranslate"><span class="pre">IWorkspace</span></code> and its subclasses) defined in module associated with variable <code class="docutils literal notranslate"><span class="pre">module</span></code>. Module-workspace is contained in module variable <code class="docutils literal notranslate"><span class="pre">__stem_workspace</span></code> if this variable exists, otherwise you should create it and store it in this variable.</p></li>
<li><p>(1 p.) In module <code class="docutils literal notranslate"><span class="pre">workspace.py</span></code>, in class <code class="docutils literal notranslate"><span class="pre">IWorkspace</span></code> implement <strong>staticmethod</strong> <code class="docutils literal notranslate"><span class="pre">find_default_workspace(task:</span> <span class="pre">Task)</span> <span class="pre">-&gt;</span> <span class="pre">&quot;IWorkspace&quot;</span></code>. This method return <code class="docutils literal notranslate"><span class="pre">_stem_workspace</span></code> value if it exists and module-workspace for module which contains task definition.</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="assignment-5-16-19-p">
<h1>Assignment 5 (16 (19) p.)<a class="headerlink" href="#assignment-5-16-19-p" title="Link to this heading"></a></h1>
<p>In this assignment you finish core part of the STEM. you have to unite all previous part and implement system of task execution.</p>
<p>For to start, let set rules of meta forwarding.</p>
<p>For example, consider next task tree:</p>
<p><img alt="" src="../../../../_images/task_graph.svg" /></p>
<p>And on the next example of meta:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;a&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;b&quot;</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;int_reduce&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="p">}</span>
    <span class="s2">&quot;float_scale&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;int_reduce&quot;</span> <span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;aa&quot;</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s2">&quot;int_scale&quot;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;bb&quot;</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>        
    <span class="p">}</span>
    <span class="s2">&quot;float_range&quot;</span> <span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this example top-level metafields <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code> , <code class="docutils literal notranslate"><span class="pre">int_reduce</span></code> forward to top-level task <code class="docutils literal notranslate"><span class="pre">float_reduce</span></code>, but metafields <code class="docutils literal notranslate"><span class="pre">float_scale</span></code> and <code class="docutils literal notranslate"><span class="pre">float_range</span></code> forward to children tasks <code class="docutils literal notranslate"><span class="pre">float_scale</span></code> and <code class="docutils literal notranslate"><span class="pre">float_range</span></code> respectively. Content of <code class="docutils literal notranslate"><span class="pre">float_scale</span></code> distributed in the same way.</p>
<ol class="arabic simple">
<li><p>(6 p.) In module <code class="docutils literal notranslate"><span class="pre">task_tree.py</span></code> implement the method  <code class="docutils literal notranslate"><span class="pre">resolve_node(self,</span> <span class="pre">task:</span> <span class="pre">Task[T],</span> <span class="pre">workspace:</span> <span class="pre">Optional[IWorkspace]</span> <span class="pre">=</span> <span class="pre">None)</span> <span class="pre">-&gt;</span> <span class="pre">TaskNode[T]:</span></code> of the class <code class="docutils literal notranslate"><span class="pre">TaskTree</span></code> and properties <code class="docutils literal notranslate"><span class="pre">dependencies</span></code>, <code class="docutils literal notranslate"><span class="pre">is_leaf</span></code>, <code class="docutils literal notranslate"><span class="pre">unresolved_dependencies</span></code> and <code class="docutils literal notranslate"><span class="pre">has_dependence_errors</span></code> of the class <code class="docutils literal notranslate"><span class="pre">TaskNode</span></code>. Instance of <code class="docutils literal notranslate"><span class="pre">TaskTree</span></code> contain tree of tasks and its dependencies (or of dependencies error). Instance of <code class="docutils literal notranslate"><span class="pre">TaskNode</span></code> is node of this tree. Method <code class="docutils literal notranslate"><span class="pre">resolve_node</span></code> accept the task and the workspace (optional if <code class="docutils literal notranslate"><span class="pre">workspace</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code> using default workspace of the task) and return <code class="docutils literal notranslate"><span class="pre">TaskNode</span></code> instance which contain the task and <code class="docutils literal notranslate"><span class="pre">TaskNode</span></code> instances for resolving dependencies (returned by <code class="docutils literal notranslate"><span class="pre">dependecies</span></code> property), names of unresolving dependecies (returned by <code class="docutils literal notranslate"><span class="pre">unresolved_dependencies</span></code> properties). The property <code class="docutils literal notranslate"><span class="pre">is_leaf</span></code> return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the task doesn’t have dependencies. The property <code class="docutils literal notranslate"><span class="pre">has_dependence_errors</span></code> return <code class="docutils literal notranslate"><span class="pre">True</span></code> if current node or any child node (on any level) have unresolving dependence.</p></li>
<li><p>(2 p.) In module <code class="docutils literal notranslate"><span class="pre">task_runner.py</span></code> implement the method <code class="docutils literal notranslate"><span class="pre">run(self,</span> <span class="pre">meta:</span> <span class="pre">Meta,</span> <span class="pre">task_node:</span> <span class="pre">TaskNode[T])</span> <span class="pre">-&gt;</span> <span class="pre">T:</span></code> of the class <code class="docutils literal notranslate"><span class="pre">SimpleRunner</span></code>. This method run the method <code class="docutils literal notranslate"><span class="pre">task_node.task.transform</span></code> using the <code class="docutils literal notranslate"><span class="pre">meta</span></code> argument and result of invocation of the <code class="docutils literal notranslate"><span class="pre">transform</span></code> method from <code class="docutils literal notranslate"><span class="pre">task_node</span></code> dependencies. Content of the <code class="docutils literal notranslate"><span class="pre">meta</span></code> argument distributed by defined rules.</p></li>
<li><p>(3 p.) In module <code class="docutils literal notranslate"><span class="pre">task_master.py</span></code> implement the method <code class="docutils literal notranslate"><span class="pre">execute(self,</span> <span class="pre">meta:</span> <span class="pre">Meta,</span> <span class="pre">task:</span> <span class="pre">Task[T],</span> <span class="pre">workspace:</span> <span class="pre">Optional[Workspace]</span> <span class="pre">=</span> <span class="pre">None)</span> <span class="pre">-&gt;</span> <span class="pre">TaskResult[T]:</span></code> of the class <code class="docutils literal notranslate"><span class="pre">TaskMaster</span></code>. This method implement next algorithm:</p>
<ol class="arabic simple">
<li><p>Get the <code class="docutils literal notranslate"><span class="pre">TaskNode</span></code> instance for given <code class="docutils literal notranslate"><span class="pre">task</span></code> from existing or new <code class="docutils literal notranslate"><span class="pre">task_tree</span></code>.The method return <code class="docutils literal notranslate"><span class="pre">TaskResult</span></code> with <code class="docutils literal notranslate"><span class="pre">TaskStatus.DEPENDENCIES_ERROR</span></code> if the <code class="docutils literal notranslate"><span class="pre">TaskNode</span></code> instance has dependencies error.</p></li>
<li><p>Verify metadata give in <code class="docutils literal notranslate"><span class="pre">meta</span></code> argument using <code class="docutils literal notranslate"><span class="pre">MetaVerification.verify</span></code>. Content of the <code class="docutils literal notranslate"><span class="pre">meta</span></code> argument distributed between tasks by defined rules. If metadata errors is presented, should be return <code class="docutils literal notranslate"><span class="pre">TaskResult</span></code> with <code class="docutils literal notranslate"><span class="pre">TaskStatus.META_ERROR</span></code> and <code class="docutils literal notranslate"><span class="pre">TaskMetaError</span></code> instance.</p></li>
<li><p>Return <code class="docutils literal notranslate"><span class="pre">TaskResult</span></code> with <code class="docutils literal notranslate"><span class="pre">TaskStatus.CONTAINS_DATA</span></code> if dependencies or meta error is absent today. In argument <code class="docutils literal notranslate"><span class="pre">lazy_data</span></code> must be stored callable value which run invocation of the task in the <code class="docutils literal notranslate"><span class="pre">task_runner</span></code>.</p></li>
</ol>
</li>
<li><p>(4 p.) In module <code class="docutils literal notranslate"><span class="pre">cli_main.py</span></code> was be implmented CLI for task run, but dark wizard <code class="docutils literal notranslate"><span class="pre">Volan-de-Mort</span></code> deleted code from git history. Fortunately, I save the help outputs of this CLI. Restore content of <code class="docutils literal notranslate"><span class="pre">cli_main.py</span></code> using this outputs.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">harry</span><span class="nd">@hogwarts</span><span class="p">:</span> <span class="n">python</span> <span class="n">cli_main</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">help</span>
<span class="n">usage</span><span class="p">:</span> <span class="n">cli_main</span><span class="o">.</span><span class="n">py</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">w</span> <span class="n">WORKSPACE</span><span class="p">]</span> <span class="n">command</span> <span class="o">...</span>

<span class="n">Run</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">workspace</span>

<span class="n">positional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="n">command</span>
    <span class="n">structure</span>           <span class="n">Print</span> <span class="n">workspace</span> <span class="n">structure</span>
    <span class="n">run</span>                 <span class="n">Run</span> <span class="n">task</span>

<span class="n">options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">w</span> <span class="n">WORKSPACE</span><span class="p">,</span> <span class="o">--</span><span class="n">workspace</span> <span class="n">WORKSPACE</span>
                        <span class="n">Add</span> <span class="n">path</span> <span class="n">to</span> <span class="n">workspace</span> <span class="ow">or</span> <span class="n">file</span> <span class="k">for</span> <span class="n">module</span> <span class="n">workspace</span>

</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">harry</span><span class="nd">@hogwarts</span><span class="p">:</span> <span class="n">python</span> <span class="n">cli_utils</span><span class="o">.</span><span class="n">py</span> <span class="n">structure</span> <span class="o">--</span><span class="n">help</span>
<span class="n">usage</span><span class="p">:</span> <span class="n">cli_utils</span><span class="o">.</span><span class="n">py</span> <span class="n">structure</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span>

<span class="n">options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>  <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>

</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">harry</span><span class="nd">@hogwarts</span><span class="p">:</span> <span class="n">python</span> <span class="n">cli_utils</span><span class="o">.</span><span class="n">py</span> <span class="n">run</span> <span class="o">--</span><span class="n">help</span>
<span class="n">usage</span><span class="p">:</span> <span class="n">cli_utils</span><span class="o">.</span><span class="n">py</span> <span class="n">run</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">m</span> <span class="n">META</span><span class="p">]</span> <span class="n">TASKPATH</span>

<span class="n">positional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="n">TASKPATH</span>

<span class="n">options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">m</span> <span class="n">META</span><span class="p">,</span> <span class="o">--</span><span class="n">meta</span> <span class="n">META</span>  <span class="n">Metadata</span> <span class="k">for</span> <span class="n">task</span> <span class="ow">or</span> <span class="n">path</span> <span class="n">to</span> <span class="n">file</span> <span class="k">with</span> <span class="n">metadata</span> <span class="ow">in</span> <span class="n">JSON</span> <span class="nb">format</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>(1 p.) Using <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> (or <code class="docutils literal notranslate"><span class="pre">toml</span></code> file) create console script for call <code class="docutils literal notranslate"><span class="pre">stem.cli_main:stem_cli_main</span></code> function.</p></li>
<li><p>(3* p.) (Optional task, for additional point) Add function for output task tree graph in image.</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="assignment-7-10-p">
<h1>Assignment 7 (10 p.)<a class="headerlink" href="#assignment-7-10-p" title="Link to this heading"></a></h1>
<p>In this assignment you have to implement Dataforge Envelope — format for transmission messages contain meta-data and binary data.</p>
<ol class="arabic simple">
<li><p>(2 p.) In module <code class="docutils literal notranslate"><span class="pre">envelope.py</span></code> implement the method <code class="docutils literal notranslate"><span class="pre">default(self,</span> <span class="pre">obj:</span> <span class="pre">Meta)</span> <span class="pre">-&gt;</span> <span class="pre">Any:</span></code> of the class <code class="docutils literal notranslate"><span class="pre">MetaEncoder(JSONEncoder)</span></code>. Class <code class="docutils literal notranslate"><span class="pre">MetaEncoder</span></code> must allow to serialize <code class="docutils literal notranslate"><span class="pre">Meta</span> <span class="pre">object</span></code> to JSON format as encoder for module <code class="docutils literal notranslate"><span class="pre">json</span></code>.</p></li>
<li><p>In module <code class="docutils literal notranslate"><span class="pre">envelope.py</span></code> implement the class <code class="docutils literal notranslate"><span class="pre">Envelope</span></code> - format for transferring data via byte stream. Description of format see below. If data size less than <code class="docutils literal notranslate"><span class="pre">Envelope._MAX_SIZE</span></code> store data in the memory, otherwise on disk using memory mapping. Implement next methods for class <code class="docutils literal notranslate"><span class="pre">Envelope</span></code>:</p>
<ol class="arabic simple">
<li><p>(3 p.) <strong>staticmetod</strong> <code class="docutils literal notranslate"><span class="pre">read(input:</span> <span class="pre">BufferedReader)</span> <span class="pre">-&gt;</span> <span class="pre">&quot;Envelope&quot;</span></code> — create <code class="docutils literal notranslate"><span class="pre">Envelope</span></code> instance from stream.</p></li>
<li><p>(3 p.) <code class="docutils literal notranslate"><span class="pre">write_to(self,</span> <span class="pre">output:</span> <span class="pre">RawIOBase):</span></code> — write <code class="docutils literal notranslate"><span class="pre">Envelope</span></code> instance to stream.</p></li>
<li><p>(1 p.) <strong>staticmetod</strong> <code class="docutils literal notranslate"><span class="pre">from_bytes(buffer:</span> <span class="pre">bytes)</span> <span class="pre">-&gt;</span> <span class="pre">&quot;Envelope&quot;:</span></code> create <code class="docutils literal notranslate"><span class="pre">Envelope</span></code> instance from binary string.</p></li>
<li><p>(1 p.) <code class="docutils literal notranslate"><span class="pre">to_bytes(self)</span> <span class="pre">-&gt;</span> <span class="pre">bytes</span></code> — convert <code class="docutils literal notranslate"><span class="pre">Envelope</span></code> instance to binary string.
Note: Use module <code class="docutils literal notranslate"><span class="pre">struct</span></code> for work with binary values.</p></li>
</ol>
</li>
</ol>
<p>Use next description of DataForge Envelope:</p>
<ul class="simple">
<li><p><strong>Tag</strong> .First 20 bytes of file or stream is reserved for envelope properties binary representation:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">#~</span></code> - two ASCII symbols, beginning of binary string.</p></li>
<li><p>4 bytes - properties <code class="docutils literal notranslate"><span class="pre">type</span></code> field: envelope format type and version. For default format the string <code class="docutils literal notranslate"><span class="pre">DF02</span></code> is used, but in principle other envelope types could use the same format.</p></li>
<li><p>2 bytes - properties <code class="docutils literal notranslate"><span class="pre">metaType</span></code> field: metadata encoding type.</p></li>
<li><p>4 bytes - properties <code class="docutils literal notranslate"><span class="pre">metaLength</span></code> field: metadata length in bytes including new lines and other separators.</p></li>
<li><p>4 bytes - properties <code class="docutils literal notranslate"><span class="pre">dataLength</span></code> field: the data length in bytes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~#</span></code> - two ASCII symbols, end of binary string.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\r\n</span></code> - two bytes, new line.
The values are read as binary and transformed into 4-byte unsigned tag codes (Big endian).</p></li>
</ul>
</li>
<li><p><strong>Metadata block</strong>. Metadata in any accepted format which length equal to <code class="docutils literal notranslate"><span class="pre">metaLength</span></code> properties. In our implementation we will consider only JSON format.</p></li>
<li><p><strong>Data block</strong>. Any other binary data which length equal to <code class="docutils literal notranslate"><span class="pre">dataLength</span></code> properties.</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="assignment-8-8-p">
<h1>Assignment 8 (8 p.)<a class="headerlink" href="#assignment-8-8-p" title="Link to this heading"></a></h1>
<p>In this assignment will be asked to practice working with IO formats.</p>
<ol class="arabic simple">
<li><p>(4 p.) (<em>Protobuf</em>, <em>Magic methods</em>) Let the data in the binary file be stored as a set of records. The record has the following format:</p>
<ul class="simple">
<li><p>The first 8 bytes contain a number N;</p></li>
<li><p>The next N bytes contain a message in the <em>protobuf</em> format (the message scheme is the same for all records).
Implement a class <code class="docutils literal notranslate"><span class="pre">ProtoList</span></code> in module <code class="docutils literal notranslate"><span class="pre">proto_list.py</span></code> that allows you to work with a file as a list of <em>protobuf</em> messages (without loading all messages in memory). Class <code class="docutils literal notranslate"><span class="pre">ProtoList</span></code> must open access to data in context manager, and close file on exit from context.</p></li>
</ul>
</li>
<li><p>(4 p.) (<em>HDF</em>, <em>ZIP</em>) Implement script for conversion binary data from CAEN multy channel ADC to HDF5 file. Example of data located by <a class="reference external" href="https://drive.google.com/drive/folders/1i3-2b_kpVFNYf8p9Y0_em3bG7PZCg9tq?usp=sharing">link</a>, in archive <code class="docutils literal notranslate"><span class="pre">wave.data.zip</span></code>. Don’t extract data from archive: use <code class="docutils literal notranslate"><span class="pre">ZipFiles</span></code> for direct reading. In archive contains several files, each file is data from one channel of ADC. Every file contains set of entries. Entries in different files is synchronized (first entry in one file corresponds first entry in another file). Each entry contain 24-bytes header and 1024 float32 values. Convert ADC data to HDF5 Tables: index of row corresponds to number of event , index of column corresponds to number of channel. Item of table is 1024-sized array corresponds values from entry without header.</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="assignment-9-14-p">
<h1>Assignment 9 (14 p.)<a class="headerlink" href="#assignment-9-14-p" title="Link to this heading"></a></h1>
<p>In this assignment you have to implement several inheritor of class <code class="docutils literal notranslate"><span class="pre">TaskRunner</span></code>.</p>
<ol class="arabic simple">
<li><p>(4 p.) Using module <code class="docutils literal notranslate"><span class="pre">threading</span></code> implement class <code class="docutils literal notranslate"><span class="pre">ThreadingRunner</span></code>, which execute every task in own thread. Use <code class="docutils literal notranslate"><span class="pre">MAX_WORKERS</span></code> class field as maximum number of threads that can be used to execute.</p></li>
<li><p>(4 p.) Using module <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> implement class <code class="docutils literal notranslate"><span class="pre">AsyncRunner</span></code>, which execute every task in own coroutine.</p></li>
<li><p>(6 p.) Using module <code class="docutils literal notranslate"><span class="pre">multyprocessing</span></code> implement class <code class="docutils literal notranslate"><span class="pre">ProcessingRunner</span></code>, which execute every task in own process. Use <code class="docutils literal notranslate"><span class="pre">MAX_WORKERS</span></code> class field as maximum number of processes that can be used to execute.</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="assignment-10-14-p">
<h1>Assignment 10 (14 p.)<a class="headerlink" href="#assignment-10-14-p" title="Link to this heading"></a></h1>
<p>In this assignment you have to implement client and server side of remote workspace: create TCP server and handler allow send information about accessible tasks and run task in server workspace.</p>
<ol class="arabic simple">
<li><p>(6 p.) In module <code class="docutils literal notranslate"><span class="pre">remote.unit.py</span></code> implement the class <code class="docutils literal notranslate"><span class="pre">UnitHander(StreamRequestHandler)</span></code> which have access to some workspace, task tree and task master. Class <code class="docutils literal notranslate"><span class="pre">UnitHandler</span></code> get user request in Dataforge Envelope (see assigment 7) and return answer also in envelope format. Class <code class="docutils literal notranslate"><span class="pre">UnitHandler</span></code> must be implement next protocol:</p>
<ol class="arabic simple">
<li><p>In input request contains message in envelope format. In message metadata block contains entries with key <code class="docutils literal notranslate"><span class="pre">command</span></code>. If input request don’t contain envelope message or envelope message don’t contain key <code class="docutils literal notranslate"><span class="pre">command</span></code> should send envelope answer with next meta entries:</p>
<ol class="arabic simple">
<li><p>Entry with key <code class="docutils literal notranslate"><span class="pre">status</span></code> and value <code class="docutils literal notranslate"><span class="pre">failed</span></code>.</p></li>
<li><p>Entry with key <code class="docutils literal notranslate"><span class="pre">error</span></code> and value contains information about error (exception message as example)</p></li>
</ol>
</li>
<li><p>If key <code class="docutils literal notranslate"><span class="pre">command</span></code> is presented in message, invoke next action and send result in envelope format:</p>
<ol class="arabic simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">command=&quot;run&quot;</span></code>, check entry with key <code class="docutils literal notranslate"><span class="pre">task_path</span></code> in metadata and if present run this task. Result of task executing return as envelope.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">command=&quot;structure&quot;</span></code>, return envelope with workspace structure (use method <code class="docutils literal notranslate"><span class="pre">structure</span></code> of workspace).</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">command=&quot;powerfullity&quot;</span></code>, return envelope with meta entry ``powerfullity` which contains some number constant.</p></li>
</ol>
</li>
</ol>
</li>
<li><p>(1 p.) In module <code class="docutils literal notranslate"><span class="pre">remote.unit.py</span></code> implement the method <code class="docutils literal notranslate"><span class="pre">start_unit(workspace:</span> <span class="pre">IWorkspace,</span> <span class="pre">host:</span> <span class="pre">str,</span> <span class="pre">port:</span> <span class="pre">int,</span> <span class="pre">powerfullity:</span> <span class="pre">Optional[int]</span> <span class="pre">=</span> <span class="pre">None)</span></code> which run TCP server able handle every request in own thread. For request handling use class <code class="docutils literal notranslate"><span class="pre">UnitHander(StreamRequestHandler)</span></code> from previous task.</p></li>
<li><p>(1 p.) In module <code class="docutils literal notranslate"><span class="pre">remote.unit.py</span></code> implement the method <code class="docutils literal notranslate"><span class="pre">start_unit_in_subprocess(workspace:</span> <span class="pre">IWorkspace,</span> <span class="pre">host:</span> <span class="pre">str,</span> <span class="pre">port:</span> <span class="pre">int,</span> <span class="pre">powerfullity:</span> <span class="pre">Optional[int]</span> <span class="pre">=</span> <span class="pre">None)</span> <span class="pre">-&gt;</span> <span class="pre">Process:</span></code> which using method <code class="docutils literal notranslate"><span class="pre">start_unit</span></code> run TCP server in children process.</p></li>
<li><p>(4 p.) In module <code class="docutils literal notranslate"><span class="pre">remote.remote_workspace.py</span></code> implement the class <code class="docutils literal notranslate"><span class="pre">RemoteWorkspace(IWorkspace)</span></code> which connect to remote TCP server implemented in task 1-2.</p></li>
<li><p>(2 p.) In module <code class="docutils literal notranslate"><span class="pre">remote.remote_workspace.py</span></code> implement the class <code class="docutils literal notranslate"><span class="pre">RemoteTask(Task)</span></code> which connect to remote TCP server implemented in task 1-2.</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="assignment-11-8-p">
<h1>Assignment 11 (8 p.)<a class="headerlink" href="#assignment-11-8-p" title="Link to this heading"></a></h1>
<p>In this assignment you have to implement a middleware server which
provide access to computation server and distribute tasks between their.</p>
<ol class="arabic simple">
<li><p>Implement next methods for class <code class="docutils literal notranslate"><span class="pre">Envelope</span></code>:</p>
<ol class="arabic simple">
<li><p>(1 p.) <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">async_read(reader:</span> <span class="pre">StreamReader)</span> <span class="pre">-&gt;</span> <span class="pre">&quot;Envelope&quot;:</span></code></p></li>
<li><p>(1 p.) <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">async_write_to(self,</span> <span class="pre">writer:</span> <span class="pre">StreamWriter):</span></code></p></li>
</ol>
</li>
<li><p>(4 p.) In module <code class="docutils literal notranslate"><span class="pre">remote.distributor.py</span></code> implement the class <code class="docutils literal notranslate"><span class="pre">Distributor</span></code> which provide access to units server (see assigment 10) and another distributor servers.  Class <code class="docutils literal notranslate"><span class="pre">Distributor</span></code> get user request in Dataforge Envelope (see assigment 7) and return answer also in envelope format. Class <code class="docutils literal notranslate"><span class="pre">Distributor</span></code> must be implemented next protocol:</p>
<ol class="arabic simple">
<li><p>In input request contains message in envelope format. In message metadata block contains entries with key <code class="docutils literal notranslate"><span class="pre">command</span></code>. If input request don’t contain envelope message or envelope message don’t contain key <code class="docutils literal notranslate"><span class="pre">command</span></code> should send envelope answer with next meta entries:</p>
<ol class="arabic simple">
<li><p>Entry with key <code class="docutils literal notranslate"><span class="pre">status</span></code> and value <code class="docutils literal notranslate"><span class="pre">failed</span></code>.</p></li>
<li><p>Entry with key <code class="docutils literal notranslate"><span class="pre">error</span></code> and value contains information about error (exception message as example)</p></li>
</ol>
</li>
<li><p>If key <code class="docutils literal notranslate"><span class="pre">command</span></code> is presented in message, invoke next action and send result in envelope format:</p>
<ol class="arabic simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">command=&quot;run&quot;</span></code>, check entry with key <code class="docutils literal notranslate"><span class="pre">task_path</span></code> in metadata and if present select random child server (with weight by powerfullity) and run this task on selected child server. Result of task executing return as envelope.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">command=&quot;structure&quot;</span></code>, return envelope with workspace structure of child server.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">command=&quot;powerfullity&quot;</span></code>, return envelope with meta entry <code class="docutils literal notranslate"><span class="pre">powerfullity</span></code> which contains sum of child server <code class="docutils literal notranslate"><span class="pre">powerfullity</span></code>.</p></li>
</ol>
</li>
</ol>
</li>
<li><p>(1 p.) In module <code class="docutils literal notranslate"><span class="pre">remote.distributor.py</span></code> implement the method <code class="docutils literal notranslate"><span class="pre">start_distributor(host:</span> <span class="pre">str,</span> <span class="pre">port:</span> <span class="pre">int,</span> <span class="pre">servers:</span> <span class="pre">list[tuple[str,</span> <span class="pre">int]])</span></code> which using module <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> run asynchronous TCP server. For request handling use class <code class="docutils literal notranslate"><span class="pre">Distributor</span></code> from previous task.</p></li>
<li><p>(1 p.) In module <code class="docutils literal notranslate"><span class="pre">remote.distributor.py</span></code> implement the method <code class="docutils literal notranslate"><span class="pre">start_distributor_in_subprocess(host:</span> <span class="pre">str,</span> <span class="pre">port:</span> <span class="pre">int,</span> <span class="pre">servers:</span> <span class="pre">list[tuple[str,</span> <span class="pre">int]])</span> <span class="pre">-&gt;</span> <span class="pre">Process</span></code> which using method <code class="docutils literal notranslate"><span class="pre">start_distributor</span></code> run TCP server in children process.</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="assignment-12-12-p">
<h1>Assignment 12 (12 p.)<a class="headerlink" href="#assignment-12-12-p" title="Link to this heading"></a></h1>
<p>In this assignment you start develop of STEM: Serious TEmperature Monitor — application with GUI, which allow measure temperature using USB thermometer, save results in database and present graph of the temperature.</p>
<ol class="arabic simple">
<li><p>(1 p.) Add supportion on <code class="docutils literal notranslate"><span class="pre">with</span></code>-context in the class <code class="docutils literal notranslate"><span class="pre">device.Thermometer</span></code>. On enter in context must be call <code class="docutils literal notranslate"><span class="pre">open</span></code> method, on exit <code class="docutils literal notranslate"><span class="pre">close</span></code> method.</p></li>
<li><p>(2 p.) In the module <code class="docutils literal notranslate"><span class="pre">app.py</span></code> implement the class <code class="docutils literal notranslate"><span class="pre">RunButton(QPushButton)</span></code> which represent a push button with two state <code class="docutils literal notranslate"><span class="pre">Run</span></code> and <code class="docutils literal notranslate"><span class="pre">Stop</span></code>. Click on the button change state. In state <code class="docutils literal notranslate"><span class="pre">Run</span></code> button must be have label <code class="docutils literal notranslate"><span class="pre">Run</span></code> and set background color to green. In state <code class="docutils literal notranslate"><span class="pre">Stop</span></code> button must be have label <code class="docutils literal notranslate"><span class="pre">Stop</span></code> and set background color to red. Information of change state write as debug message to <code class="docutils literal notranslate"><span class="pre">logging.root</span></code> logger.</p></li>
<li><p>(2 p.) In the module <code class="docutils literal notranslate"><span class="pre">controller.py</span></code> implement the class <code class="docutils literal notranslate"><span class="pre">ThermometerController(QObject)</span></code> which using method <code class="docutils literal notranslate"><span class="pre">start</span></code>\<code class="docutils literal notranslate"><span class="pre">stop</span></code> turn on\off data collection from <code class="docutils literal notranslate"><span class="pre">device:</span> <span class="pre">Thermometer</span></code>. After call of <code class="docutils literal notranslate"><span class="pre">start</span></code> method this class begin periodically (with period <code class="docutils literal notranslate"><span class="pre">config.period</span></code>, using itself timer of <code class="docutils literal notranslate"><span class="pre">QObject</span></code>) requests of data at the device and emit getting value to signal <code class="docutils literal notranslate"><span class="pre">measurment</span></code>. <code class="docutils literal notranslate"><span class="pre">stop</span></code> method stop its timer. Also <code class="docutils literal notranslate"><span class="pre">start</span></code> method pass debug message with temperature value to <code class="docutils literal notranslate"><span class="pre">logging.root</span></code> logger.</p></li>
<li><p>(2 p.) In the module <code class="docutils literal notranslate"><span class="pre">app.py</span></code> implement the class <code class="docutils literal notranslate"><span class="pre">Central(QWidget)</span></code> which must be used as central widget of main window. Add on this widget button from first task. Connect <code class="docutils literal notranslate"><span class="pre">controller</span> <span class="pre">:</span> <span class="pre">ThermometerController</span></code> to button click: click in state <code class="docutils literal notranslate"><span class="pre">Run</span></code> run <code class="docutils literal notranslate"><span class="pre">controller.start</span></code>, click in state <code class="docutils literal notranslate"><span class="pre">Stop</span></code> run <code class="docutils literal notranslate"><span class="pre">controller.stop</span></code>.</p></li>
<li><p>(2 p.) In the module <code class="docutils literal notranslate"><span class="pre">app.py</span></code> implement the class <code class="docutils literal notranslate"><span class="pre">Main(QMainWindow)</span></code> which represent main window of application. In this class setup window title <code class="docutils literal notranslate"><span class="pre">&quot;Serious</span> <span class="pre">TEmperature</span> <span class="pre">Monitor&quot;</span></code>, add widget from previous task as central widget. Also using <code class="docutils literal notranslate"><span class="pre">QSettings</span></code> save last window size on exit and restore his by next run.</p></li>
<li><p>(2 p.) Add to main window from previous task a dock widget (QDockWidget), which contain text output (QTextEditor). Connect this text output with <code class="docutils literal notranslate"><span class="pre">logging.root</span></code> logger (using <code class="docutils literal notranslate"><span class="pre">LoggerHandler</span></code>). Add to main window toolbar action which hide/show this dock.</p></li>
<li><p>(1 p.) In the module <code class="docutils literal notranslate"><span class="pre">app.py</span></code> implement the <code class="docutils literal notranslate"><span class="pre">run</span></code> method and create in <code class="docutils literal notranslate"><span class="pre">setup.py/.toml</span></code> entry point for run this method as console script.</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="assignment-13-8-p">
<h1>Assignment 13 (8 p.)<a class="headerlink" href="#assignment-13-8-p" title="Link to this heading"></a></h1>
<p>In this assignment you continue to develop of STEM: Serious TEmperature Monitor — application with GUI, which allow measure temperature using USB thermometer, save results in database and present graph of the temperature.</p>
<ol class="arabic simple">
<li><p>(6+2 p.) In the module <code class="docutils literal notranslate"><span class="pre">app.py</span></code> implement the class <code class="docutils literal notranslate"><span class="pre">Oscilloscope(QWidget)</span></code> with view two graph: line plot with dependency temperature from time and histogram of measured temperature values. Connect oscilloscope to <code class="docutils literal notranslate"><span class="pre">ThermometerController</span></code> and update graph on every new measurement (ranges of y-axis must be setup dynamically) (6 p.). Line plot must be view data from last <code class="docutils literal notranslate"><span class="pre">Oscilloscope.N</span></code> points (ranges of x-axis of line plot must be setup dynamically). For every graph add axis labels, plot grid and secondary Y axis on right side of graphs (2 p.). Add oscilloscope widget to central windget of application.</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="assignment-14-12-p">
<h1>Assignment 14 (12 p.)<a class="headerlink" href="#assignment-14-12-p" title="Link to this heading"></a></h1>
<p>In this assignment you continue to develop of STEM: Serious TEmperature Monitor — application with GUI, which allow measure temperature using USB thermometer, save results in database and present graph of the temperature.</p>
<ol class="arabic simple">
<li><p>(2 p.) In the module <code class="docutils literal notranslate"><span class="pre">config.py</span></code> implement the function <code class="docutils literal notranslate"><span class="pre">from_dict(data:</span> <span class="pre">dict,</span> <span class="pre">factory:</span> <span class="pre">Type[T])</span> <span class="pre">-&gt;</span> <span class="pre">T</span></code> which create dataclass instance of type <code class="docutils literal notranslate"><span class="pre">factory</span></code> (guaranteed what <code class="docutils literal notranslate"><span class="pre">factory</span></code> is dataclass type) from dict <strong>in take to account</strong> what type <code class="docutils literal notranslate"><span class="pre">factory</span></code> can be has another dataclass as field and its also can be created from nested dictionary entry.</p></li>
<li><p>(2 p.) In the module <code class="docutils literal notranslate"><span class="pre">config.py</span></code> implement the function <code class="docutils literal notranslate"><span class="pre">resolve_config(factory:</span> <span class="pre">Type[T],</span> <span class="pre">user_path:</span> <span class="pre">Union[str,Path],</span> <span class="pre">default_path</span> <span class="pre">:</span> <span class="pre">Union[str,Path])</span> <span class="pre">-&gt;</span> <span class="pre">T</span></code> which create dataclass instance of type <code class="docutils literal notranslate"><span class="pre">factory</span></code> (guaranteed what <code class="docutils literal notranslate"><span class="pre">factory</span></code> is dataclass type) from user/default config in YAML format (see <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code>) by  next algorithm:</p>
<ol class="arabic simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">user_path</span></code> path exist than created from it.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">user_path</span></code> path don’t exist than check <code class="docutils literal notranslate"><span class="pre">dafult_path</span></code> path.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">default_path</span></code> path exist than created from it.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">default_path</span></code> path don’t exist than created dataclass with default field (its garuanted) and <strong>save this config to <code class="docutils literal notranslate"><span class="pre">default_path</span></code> in YAML format</strong>.</p></li>
</ol>
</li>
<li><p>(1 p.) In the module <code class="docutils literal notranslate"><span class="pre">app.py</span></code> fixe the call of <code class="docutils literal notranslate"><span class="pre">resolve_config</span></code> in the function <code class="docutils literal notranslate"><span class="pre">run</span></code>. Add as <code class="docutils literal notranslate"><span class="pre">default_path</span></code> path to default user system directory for application config (used module <code class="docutils literal notranslate"><span class="pre">appdirs</span></code>, application name is <code class="docutils literal notranslate"><span class="pre">STEM</span></code>, application author is you username).</p></li>
<li><p>(1 p.) In the module <code class="docutils literal notranslate"><span class="pre">database.py</span></code> implement the class <code class="docutils literal notranslate"><span class="pre">Point</span></code> which describe table with two columns: temperature value and time of measurement (database usually have special types for datetime data).</p></li>
<li><p>(4 p.) In the module <code class="docutils literal notranslate"><span class="pre">database.py</span></code> implement the class <code class="docutils literal notranslate"><span class="pre">Database</span></code> with next methods:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">add_point(self,</span> <span class="pre">point:</span> <span class="pre">Point)</span></code> — insert point to database.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_points(self,</span> <span class="pre">from_date:</span> <span class="pre">datetime)</span> <span class="pre">-&gt;</span> <span class="pre">list[Point]</span></code> — get list of point from given date.</p></li>
<li><p><strong>staticmethod</strong> <code class="docutils literal notranslate"><span class="pre">create_or_connect_sqlite(config:</span> <span class="pre">SqliteConfig)</span> <span class="pre">-&gt;</span> <span class="pre">&quot;Database&quot;</span></code> create of <code class="docutils literal notranslate"><span class="pre">Database</span></code> instance with connect (or create and connect) to sqlite database with parameters from <code class="docutils literal notranslate"><span class="pre">config</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__init__(self,</span> <span class="pre">engine:</span> <span class="pre">Engine):</span></code> — create the table <code class="docutils literal notranslate"><span class="pre">Point</span></code> in database <code class="docutils literal notranslate"><span class="pre">engine</span></code></p></li>
</ol>
</li>
<li><p>(2 p.) Connect <code class="docutils literal notranslate"><span class="pre">Database</span></code> instance from <code class="docutils literal notranslate"><span class="pre">run</span></code> function to your application: autosave measured temperature and time of measurement in database, as well as on application start load on plot all points from last 15 minutes.</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="assignment-15-10-p">
<h1>Assignment 15 (10 p.)<a class="headerlink" href="#assignment-15-10-p" title="Link to this heading"></a></h1>
<p>In this assignment you finish to develop of STEM: Serious TEmperature Monitor — application with GUI, which allow measure temperature using USB thermometer, save results in database and present graph of the temperature.</p>
<ol class="arabic simple">
<li><p>(10 p.) In the module <code class="docutils literal notranslate"><span class="pre">usb.py</span></code> resolve all <code class="docutils literal notranslate"><span class="pre">TODO</span></code> (using protocol from <span class="xref myst">RODOS_5_protocol.md</span>) and nextly in the module <code class="docutils literal notranslate"><span class="pre">device.py</span></code> implement the class <code class="docutils literal notranslate"><span class="pre">USBThermometer</span></code> using <code class="docutils literal notranslate"><span class="pre">RODOS56</span></code> class</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="usb-rodos-5">
<h1>USB-термометр RODOS-5<a class="headerlink" href="#usb-rodos-5" title="Link to this heading"></a></h1>
<p>Для подачи команды на термометр:</p>
<ol class="arabic simple">
<li><p>Ему передается буфер из девяти байт.</p></li>
<li><p>Ожидаем некоторое время (таймаут).</p></li>
<li><p>Считываем ответный буффер из девяти байт.</p></li>
<li><p>Проверяем корректность ответа.</p></li>
</ol>
<p>Правила заполнения буфера (для основных команд):</p>
<ul class="simple">
<li><p>Нулевой байт всегда равен нулю</p></li>
<li><p>Неиспользуемые байты в конце буффера равны нулю</p></li>
<li><p>Первый и второй байт задают команду</p></li>
<li><p>Начиная с третьего байта идут пользовательские данные/выходные данные термометра</p></li>
</ul>
<p>Проверка корректности считывания:</p>
<ul class="simple">
<li><p>Первые три байта выходного буфера должны быть равны первым трём байтам входного</p></li>
</ul>
<p>Описание команд:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Команда</p></th>
<th class="head"><p>первый/второй байт</p></th>
<th class="head"><p>таймаут</p></th>
<th class="head"><p>Куда записываются пользовательские данные</p></th>
<th class="head"><p>Как парсить ответ</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>RESET</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0x180x48</span></code></p></td>
<td><p>10 ms</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Записать один <strong>бит</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0x180x81</span></code></p></td>
<td><p>5 ms</p></td>
<td><p>в третий байт буфера, надо передать байт у которого все биты кроме первого равны нулю</p></td>
<td><p>третий байт равен переданному</p></td>
</tr>
<tr class="row-even"><td><p>Записать один байт</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0x180x88</span></code></p></td>
<td><p>5 ms</p></td>
<td><p>надо передать байт в третий байт буфера</p></td>
<td><p>третий байт равен переданному</p></td>
</tr>
<tr class="row-odd"><td><p>Записать четыре байта</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0x180x84</span></code></p></td>
<td><p>5 ms</p></td>
<td><p>Передаваемые байты надо записать с 3 по 7 позицию буффера</p></td>
<td><p>3-7 байты выходного буфера равны переданным</p></td>
</tr>
<tr class="row-even"><td><p>Прочитать 2 <strong>бита</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0x180x82</span></code></p></td>
<td><p>5 ms</p></td>
<td><p>В 3-4 позицию буфера надо записать <code class="docutils literal notranslate"><span class="pre">0x01</span></code></p></td>
<td><p>3-4 байты выходного буфера в первом бите содержат необходимые занчения</p></td>
</tr>
<tr class="row-odd"><td><p>Прочитать один байт</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0x180x88</span></code></p></td>
<td><p>5 ms</p></td>
<td><p>В 3 байт надо записать <code class="docutils literal notranslate"><span class="pre">0xFF</span></code></p></td>
<td><p>В 3 позиции выходного буфера будет считанный байт</p></td>
</tr>
<tr class="row-even"><td><p>Прочитать четыре байта</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0x180x84</span></code></p></td>
<td><p>30 ms</p></td>
<td><p>В 3-7 байты надо записать <code class="docutils literal notranslate"><span class="pre">0xFF</span></code></p></td>
<td><p>В 3-7 позиции выходного буфера будет считанные байты</p></td>
</tr>
<tr class="row-odd"><td><p>Получить ID устройства</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0x1d0x00</span></code></p></td>
<td><p>5ms</p></td>
<td><p>Последние четыре байта, безнаковое целое в big-endian</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Нижняя область">
        <a href="01.html" class="btn btn-neutral float-left" title="Домашняя работа № 1 (14 p.)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Предыдущая</a>
        <a href="../../../../cards/toctree.html" class="btn btn-neutral float-right" title="Материалы курса" accesskey="n" rel="next">Следующая <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Авторские права 2023, Mikhail Zelenyi et al. </p>
  </div>

  Собрано при помощи <a href="https://www.sphinx-doc.org/">Sphinx</a> с использованием
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">темы,</a>
    предоставленной <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>